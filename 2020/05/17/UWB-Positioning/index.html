<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="description" content="Powered by Hexo.">



<title>四种经典的室内定位算法 | ReyesMeng&#39;s Blog</title>



    <link rel="icon" href="/image/NewRM.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
            <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


        
    


<script>
  (function(d) {
    var config = {
      kitId: 'dth4cbv',
      scriptTimeout: 3000,
      async: true
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="ReyesMeng's Blog" type="application/atom+xml">
</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Reyes Meng&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="https://reyesmeng2.github.io/" target="_blank" rel="noopener">Music</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Reyes Meng&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="https://reyesmeng2.github.io/" target="_blank" rel="noopener">Music</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">四种经典的室内定位算法</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">ReyesMeng</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">May 17, 2020&nbsp;&nbsp;20:51:52</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Blogs/">Blogs</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <hr>
<p><center><font face="楷体" size="2" color="gray">
疫情在家忙着搞毕业设计，本小子的课题方向涉及UWB定位相关内容，牵扯<br>到室内定位技术，查阅论文学习之后记录四种经典的室内定位算法原理于此。
</font>
</center>
</p>

<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p><font size="6">无</font>线定位技术发展至今，目前比较具有代表性的有全球定位系统$GPS$和和我国的北斗卫星定位系统$BDS$。这些定位系统在空旷的室外环境下表现优良，足以满足人们日常出行时定位导航的需要，然而在室内环境或存在大型建筑物遮挡时，其定位精度严重恶化甚至有时候出现无法定位的状况。所以，对支持在室内环境或较为封闭的工作环境下的高精度室内定位方法的研究十分重要。</p>
<p>考虑到UWB技术的突出特点，使用其作为室内定位方案可以获得更高的传输速率、更可靠的通信安全性、更小的功耗、更弱的系统干扰、以及更大的的空间容量，从而满足高精度定位的需要。</p>
<p>现有定位方法按找是否需要计算距离可被分为两大类。其中，与距离无关的定位方法无需知道未知节点（标签或Tag）到参考节点（基站或Anchor）的距离信息，而是通过网络中各个节点间的连通性确定节点间的跳数信息，最终利用这些信息完成待测节点的位置估算<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。与距离有关的定位方法根据具体测量参数的差异又可分为：<strong>基于接收信号强度的$RSSI $算法、基于信号到达时间的$TOA$ 和$TDOA $算法、基于信号到达角度的$AOA $算法等</strong><sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。下面主要介绍这四种经典的室内定位算法。</p>
<h2 id="基于接收信号强度的定位算法"><a href="#基于接收信号强度的定位算法" class="headerlink" title="基于接收信号强度的定位算法"></a>基于接收信号强度的定位算法</h2><p>电磁波传播损耗与传输距离有关，基于接收信号强度($RSSI$)的定位算法便是利用发射机与接收机之间的信道参数求解距离大小。自由空间中接收信号功率与发射机接收机距离的函数关系满足：<br>$$P_r(d)=P_tG_tG_r\tau\bigg(\frac{\lambda}{4\pi d}\bigg)^2$$<br>式中$P_r$为信号接收功率，$G_r$为接收天线增益，$P_t$为信号发射功率，$G_t$为发射天线增益，$\tau$为损耗因子，$\lambda$为工作波长，$d$为距离。通过测量接收功率，利用系统搭建时设定的发射功率、发射和接收天线增益，即可解出距离的值，多次测量求取均值，进而得到目标节点所处的位置参数。</p>
<p>然而实际环境下情况更为复杂，电磁波的传播信道中存在着多径衰落、阴影衰落等等，此时需要修改上式为<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>：<br>$$PL(d)=PL_0-10\beta\lg\bigg(\frac{d}{d_0}\bigg)+X_{\sigma}$$<br>式中$PL(d)$为移动台的信号强度，$PL_0$为基站的信号强度，$\beta$为信道衰减因子，$d$为基站与移动台间的距离，$d_0$为基站与参考节点间的距离（室内定位时一般设置为1m），$X_{\sigma}$表示实际值与估计值间的误差，是服从$(0,{\sigma}^2)$的高斯变量。于是根据参考节点的位置信息$(x_0,y_0,z_0)$，目标节点的位置信息$(x,y,z)$可由下式给出。<br>$$d=\sqrt{(x-x_0)^2+(y-y_0)^2+(z-z_0)^2}$$<br>根据函数式可以看出，基于接收信号强度的定位算法与时间无关，依赖信道参数进行计算，所以需要根据实际场景进行调整。该算法对环境变化比较敏感，受多径效应影响较大，需要使用多个接收机进行多次测量求取均值来提高定位精度。</p>
<h2 id="基于时间信息的定位算法"><a href="#基于时间信息的定位算法" class="headerlink" title="基于时间信息的定位算法"></a>基于时间信息的定位算法</h2><h3 id="基于信号到达时间的定位算法"><a href="#基于信号到达时间的定位算法" class="headerlink" title="基于信号到达时间的定位算法"></a>基于信号到达时间的定位算法</h3><p>基于信号到达时间($TOA$)的定位算法需要设置多个（三个及以上）接收机测量目标节点UWB 信号的传输时间。为了提高传输时间的测量精度，需要去除系统内可能存在的时延，如发射机处的发射时延和接受机处的接收时延，并保持接收机和目标节点间计时脉冲相互同步。此时信号发送时间和接收时间之差即为UWB 信号在空间中传播用时$t_i$，假设此时空间中信号传播速度为$v$，那么各接收机与目标节点间距离$d_i$可表示为：<br>$$d_i=vt_i, i=0,1,2,\cdots$$<br>理想情况下，若接收机位置坐标已知为$(x_i,y_i,z_i)$，那么目标节点的位置坐标$(x, y, z)$应满足：<br>$$\sqrt{(x_i-x_0)^2+(y_i-y_0)^2+(z_i-z_0)^2}=d_i,i=0,1,2,\cdots$$<br>每个接收机都可以写出这样一个方程，共同组成包含目标节点位置信息的方程组。当系统内误差为零时，该方程组有唯一解，即所有接收机覆盖范围圆的公共交点便是目标节点所在的位置。但实际场景中，系统误差会使得这些圆相互覆盖并形成一个公共区域，目标节点应在这一区域中。这种方法实现方法简单，但因UWB 脉冲持续时间极短、传播速度极快，系统中时间测量误差对结果的影响巨大，对系统内发射机和接收机同步时钟的精度要求严格，然而这个条件往往较难实现。</p>
<h3 id="基于信号到达时间差值的定位算法"><a href="#基于信号到达时间差值的定位算法" class="headerlink" title="基于信号到达时间差值的定位算法"></a>基于信号到达时间差值的定位算法</h3><p>基于目标节点和参考节点信号到达时间差($TDOA$)的定位算法与$TOA $方法类似，都是在尽可能消除延时误差后，利用时间与空间内电磁波传输速度相乘来获得距离。但不同之处在于，$TDOA $算法中使用的时间是信号从目标节点出发到不同接收机传输时间的差值。相应的，其计算出的距离实际上是不同接收机位置距离之差。</p>
<p><img src="/2020/05/17/UWB-Positioning/TDOA.jpg" alt="TDOA" title="TDOA"></p>
<p>对于使用三个接收机对目标节点进行定位的情况，如图1所示，假设接收机$BS_1$、$BS_2$、$BS_3$位置已知为$(x_i,y_i,z_i),i=1,2,3$，其接收到目标节点信号的时间分别为$t_1$、$t_2$、$t_3$，定义$T_{21}$和$T_{31}$分别为接收机$BS_1$、$BS_2$以及$BS_1$、$BS_3$间的时间差，此时信号在该环境下的传播速度为$v$，那么目标节点到两个不同接收机的距离差为：<br>$$\begin{cases}<br>d_{21}=vT_{21}\\<br>d_{31}=vT_{31}\\<br>\end{cases}$$<br>目标节点的位置$(x,y,z)$和接收机位置间存在以下关系，据此可以求出目标节点的位置坐标。<br>$$\begin{cases}<br>d_{21}=d_2-d_1=\sqrt{(x_2-x)^2+(y_2-y)^2+(z_2-z)^2}-\sqrt{(x_1-x)^2+(y_1-y)^2+(z_1-z)^2}\\<br>d_{31}=d_3-d_1=\sqrt{(x_3-x)^2+(y_3-y)^2+(z_3-z)^2}-\sqrt{(x_1-x)^2+(y_1-y)^2+(z_1-z)^2}\\<br>\end{cases}$$<br>相比$TOA$ 算法，接收机在$TDOA$ 方案中不需要去同步目标节点的计时信息，只需要各个接收机之间完成同步计时，其系统相对简化，在室内环境下其稳定性及定位的精准度更强。</p>
<h2 id="基于信号到达角度的定位算法"><a href="#基于信号到达角度的定位算法" class="headerlink" title="基于信号到达角度的定位算法"></a>基于信号到达角度的定位算法</h2><p>基于信号到达角度($AOA$)算法需要测量信号接收时的角度信息。如图2所示，在理想情况下，假设放置在同一平面内的两接收机位置已知，分别为$(x_1,y_1)$和$(x_2,y_2)$。通过阵列天线可以获得目标节点发射信号的到达角度分别为$\theta_1$和$theta_2$，现将三个节点放入同一个平面直角坐标系中，那么目标节点的位置信息$(x,y)$与角度之间满足：<br>$$\begin{cases}<br>\tan(\theta_1)=\frac{y-y_1}{x-x_1}\\<br>\tan(\theta_2)=\frac{y-y_2}{x-x_2}\\<br>\end{cases}$$<br>将测量值代入上式可以解出目标节点的位置坐标。</p>
<p><img src="/2020/05/17/UWB-Positioning/AOA.jpg" alt="AOA" title="AOA"></p>
<p>和前面介绍的其它几种定位算法相比，$AOA$ 需要的设备更少，投入较小，但在天线阵列的性能表现不佳时，会带来测量信息误差较大的问题，当目标节点和接收机间存在障碍物时，其定位性能明显降低。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>综上所述，四种定位算法中，基于接收信号强度的$RSSI $算法实现起来最简单，但其定位精度受环境影响较大；基于信号到达角度的$AOA$ 算法需要用到阵列天线确保定位的准确性，系统搭建成本较高；基于信号传输时间的两种算法定位精度与接收机时钟的稳定性密切相关，其实现成本较低，更适合作为室内定位的方案。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;">朱颖. 基于UWB 的室内定位系统设计与实现[D]. 南京: 南京邮电大学, 2019.</span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">屠晓东. 基于UWB 信号的多基站与单基站定位算法的研究与性能分析[D]. 中国海洋大学, 2012.</span><a href="#fnref:2" rev="footnote"> ↩</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline-block; vertical-align: top;">陈维克，李文峰，首珩等. 基于RSSI 的无线传感器网络加权质心定位算法[N]. 武汉理工大学学报，2006.</span><a href="#fnref:3" rev="footnote"> ↩</a></li></ol></div></div>
        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>ReyesMeng</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://callmemengmeng.github.io/2020/05/17/UWB-Positioning/">https://callmemengmeng.github.io/2020/05/17/UWB-Positioning/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Vaya con <strong>Dios<strong>.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Blogs/"># Blogs</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/05/30/Meteor-Burst-Communication/">浅谈流星余迹通信(MBC)</a>
            
            
            <a class="next" rel="next" href="/2020/04/29/S-parameter/">关于散射参数的碎碎念</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© ReyesMeng | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="开发者https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
